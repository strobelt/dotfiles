set -g default-terminal "screen-256color"
set -ag terminal-overrides ",alacritty:RGB"

set-option -g prefix C-q
setw -g mode-keys vi
set -g mouse on

setw -g xterm-keys on
set -s escape-time 10
set -sg repeat-time 600
set -s focus-events on
set -q -g status-utf8 on
setw -q -g utf8 on
set -g history-limit 5000

# Edit tmux configuration
bind e new-window -n "~/.tmux.conf" "nvim ~/.tmux.conf && tmux source ~/.tmux.conf && tmux display \"~/.tmux.conf sourced\""

# Reload configuration
bind r source-file ~/.tmux.conf \; display '~/.tmux.conf sourced'

bind v new-window -n "~/.config/nvim/init.vim" "nvim ~/.config/nvim/init.vim && tmux source ~/.config/nvim/init.vim && tmux display \"~/.config/nvim/init.vim sourced\""

# Pane border
set-option -g pane-border-style fg=colour235 #fg=base02
set-option -g pane-active-border-style fg=colour240 #fg=base01

# message text
set-option -g message-style bg=colour235,fg=colour166 # bg=base02, fg=orange

# pane number display
#set -g display-panes-active-colour colour33 #blue
#set-option -g display-panes-colour colour166 #orange
# Clock
#set-window-option -g clock-mode-colour green #green

set -s escape-time 10                     # faster command sequences
set -sg repeat-time 600                   # increase repeat timeout
set -s focus-events on
set -g history-limit 5000                 # boost history

set -q -g status-utf8 on                  # expect UTF-8 (tmux < 2.2)
setw -q -g utf8 on

# Status bar
TMUX_DARK_COLOUR=colour237
TMUX_LIGHT_COLOUR=colour226
set -g status-interval 1

set -g status-style bg=$TMUX_DARK_COLOUR,fg=$TMUX_LIGHT_COLOUR
set -g status-justify left

set -g status-left-length 120
set -g status-left '#[bg=#{TMUX_LIGHT_COLOUR},fg=#{TMUX_DARK_COLOUR},bold] #(whoami)@#H #[default] '

#set -g window-status-format '#I:#W'
#set -g window-status-current-format '#[fg=green,bold]#I:#W'
#set -g window-status-separator '>'

set -g status-right-length 240
set -g status-right ' #[default]#[bg=#{TMUX_LIGHT_COLOUR},fg=#{TMUX_DARK_COLOUR}] %H:%M %F [%a] '

# Pane splitting
bind C-d split-window -v
bind C-r split-window -h
bind C-c split-window -fh -c "#{pane_current_path}" "clj -M:nrepl"
unbind d

# Pane traversal using HJKL
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Auto window rename
set-window-option -g automatic-rename

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on
# TokyoNight colors for Tmux

set -g mode-style "fg=#7aa2f7,bg=#3b4261"

set -g message-style "fg=#7aa2f7,bg=#3b4261"
set -g message-command-style "fg=#7aa2f7,bg=#3b4261"

set -g pane-border-style "fg=#3b4261"
set -g pane-active-border-style "fg=#7aa2f7"

set -g status "on"
set -g status-justify "left"

set -g status-style "fg=#7aa2f7,bg=#16161e"

set -g status-left-length "100"
set -g status-right-length "100"

set -g status-left-style NONE
set -g status-right-style NONE

set -g status-left "#[fg=#15161e,bg=#7aa2f7,bold] #S #[fg=#7aa2f7,bg=#16161e,nobold,nounderscore,noitalics]"
set -g status-right "#[fg=#16161e,bg=#16161e,nobold,nounderscore,noitalics]#[fg=#7aa2f7,bg=#16161e] #{prefix_highlight} #[fg=#3b4261,bg=#16161e,nobold,nounderscore,noitalics]#[fg=#7aa2f7,bg=#3b4261] %Y-%m-%d  %I:%M %p #[fg=#7aa2f7,bg=#3b4261,nobold,nounderscore,noitalics]#[fg=#15161e,bg=#7aa2f7,bold] #h "
if-shell '[ "$(tmux show-option -gqv "clock-mode-style")" == "24" ]' {
  set -g status-right "#[fg=#16161e,bg=#16161e,nobold,nounderscore,noitalics]#[fg=#7aa2f7,bg=#16161e] #{prefix_highlight} #[fg=#3b4261,bg=#16161e,nobold,nounderscore,noitalics]#[fg=#7aa2f7,bg=#3b4261] %Y-%m-%d  %H:%M #[fg=#7aa2f7,bg=#3b4261,nobold,nounderscore,noitalics]#[fg=#15161e,bg=#7aa2f7,bold] #h "
}

setw -g window-status-activity-style "underscore,fg=#a9b1d6,bg=#16161e"
setw -g window-status-separator ""
setw -g window-status-style "NONE,fg=#a9b1d6,bg=#16161e"
setw -g window-status-format "#[fg=#16161e,bg=#16161e,nobold,nounderscore,noitalics]#[default] #I  #W #F #[fg=#16161e,bg=#16161e,nobold,nounderscore,noitalics]"
setw -g window-status-current-format "#[fg=#16161e,bg=#3b4261,nobold,nounderscore,noitalics]#[fg=#7aa2f7,bg=#3b4261,bold] #I  #W #F #[fg=#3b4261,bg=#16161e,nobold,nounderscore,noitalics]"

# tmux-plugins/tmux-prefix-highlight support
set -g @prefix_highlight_output_prefix "#[fg=#e0af68]#[bg=#16161e]#[fg=#16161e]#[bg=#e0af68]"
set -g @prefix_highlight_output_suffix ""

